# 自动发现页面

## 📍 页面路径
管理后台 → 自动发现（`/admin/autodiscovery`）

## 🎯 页面功能
- 生成服务器注册密钥和安装命令
- 配置自动发现参数
- 审核待注册的服务器
- 查看已发现的服务器

## 📋 页面布局

### 快速开始
提供两种模式：
- **被动模式**（推荐）：服务器开放端口，面板主动查询
- **主动模式**：服务器主动上报数据，无需开放端口

快速开始步骤：
1. 选择模式（被动/主动）
2. 复制安装命令到目标服务器执行
3. 等待服务器自动注册（如启用审核则需手动批准）

### 自动发现设置
- **启用自动发现**：开启/关闭自动发现功能
- **自动批准**：新服务器注册后是否自动批准（推荐关闭，手动审核）
- **默认分组**：自动注册的服务器加入的分组
- **默认标签**：自动添加的标签（逗号分隔）

### 待审核服务器
显示使用注册密钥注册但未审核的服务器：
- **服务器信息**：名称、IP、操作系统、注册时间
- **操作**：批准、拒绝、查看详情
- **批量操作**：批量批准/拒绝

### 已发现服务器
显示已批准的服务器列表：
- **服务器信息**：名称、IP、状态、发现时间
- **操作**：查看详情、编辑、删除

## 🔧 操作步骤

### 快速注册服务器

#### 被动模式（推荐）
1. 进入"快速开始"区域
2. 确保选择"被动模式"（默认）
3. 如需要，修改通信端口（面板默认 9999）
4. 复制安装命令到目标服务器执行
5. 等待服务器自动注册并显示在"待审核服务器"列表中

#### 主动模式
1. 进入"快速开始"区域
2. 点击"高级配置"展开高级选项
3. 选择"主动模式"
4. 复制安装命令到目标服务器执行
5. 服务器将主动上报数据，无需开放端口

### 配置自动发现设置
1. 进入"自动发现设置"区域
2. 勾选"启用自动发现"
3. 配置自动批准：
   - 关闭：新服务器需手动审核（推荐）
   - 开启：自动批准所有注册请求
4. 选择默认分组
5. 输入默认标签（可选，多个用逗号分隔）
6. 点击"保存设置"

### 审核待注册服务器
1. 进入"待审核服务器"区域
2. 查看待审核服务器列表
3. **批准服务器**：
   - 点击"批准"按钮
   - 选择分组和标签（可选）
   - 确认批准
4. **拒绝服务器**：
   - 点击"拒绝"按钮
   - 输入拒绝原因（可选）
   - 确认拒绝
5. **批量操作**：
   - 勾选多个服务器
   - 点击"批量批准"或"批量拒绝"
   - 设置统一的分组和标签

### 查看已发现服务器
1. 进入"已发现服务器"区域
2. 查看已批准的服务器列表
3. 使用搜索和筛选功能查找特定服务器
4. 点击服务器查看详细信息

## ⚠️ 注意事项

- **被动模式**：需要服务器开放通信端口（面板默认 9999），确保防火墙允许访问
- **主动模式**：无需开放端口，适合内网服务器，但功能可能受限（如网络质量检测）
- **自动批准**：建议关闭自动批准，手动审核以确保安全性
- **注册密钥**：注册密钥会自动刷新，旧密钥将失效
- **卸载命令**：如需移除服务器，可使用"卸载命令"区域中的命令
